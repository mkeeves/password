<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password & Passphrase Generator</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="theme-dropdown">
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme menu">
      <span class="theme-icon"></span>
    </button>
    <div class="theme-menu" id="themeMenu">
      <button class="theme-option" data-theme="light">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        <span>Light</span>
      </button>
      <button class="theme-option" data-theme="dark">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        <span>Dark</span>
      </button>
      <button class="theme-option" data-theme="auto">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/><path d="M12 6a6 6 0 0 1 0 12"/></svg>
        <span>Auto</span>
      </button>
    </div>
  </div>

  <div class="container">
    <header>
      <h1>Password & Passphrase Generator</h1>
      <p>Secure, client-side generation using Web Crypto API</p>
    </header>

    <div class="mode-toggle">
      <button id="modePassword" class="active">Password</button>
      <button id="modePassphrase">Passphrase</button>
    </div>

    <div class="card options-card active" id="passwordOptions">
      <div class="form-group">
        <label for="length">Length</label>
        <input type="number" id="length" min="8" max="128" value="16">
      </div>
      <div class="form-group">
        <label>Character Sets</label>
        <div class="checkbox-group">
          <label class="checkbox-label">
            <input type="checkbox" id="useLower" checked>
            <span>a-z</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="useUpper" checked>
            <span>A-Z</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="useNumbers" checked>
            <span>0-9</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="useSimpleSymbols" checked>
            <span>Simple symbols</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="useAllSymbols">
            <span>All symbols</span>
          </label>
        </div>
        <p class="hint">Simple symbols: !@#$%^&()-_=+[]{}:;,.? (excludes quotes, backslash, wildcards)</p>
      </div>
    </div>

    <div class="card options-card" id="passphraseOptions">
      <div class="form-group">
        <label for="words">Number of Words</label>
        <input type="number" id="words" min="1" max="12" value="5">
      </div>
      <div class="form-group">
        <label for="separator">Separator</label>
        <select id="separator">
          <option value="-">Hyphen (-)</option>
          <option value="space">Space</option>
          <option value="_">Underscore (_)</option>
          <option value="." selected>Dot (.)</option>
          <option value="none">None</option>
        </select>
      </div>
      <div class="form-group">
        <label>Extras</label>
        <div class="extras-list">
          <div class="extra-option">
            <label class="checkbox-label">
              <input type="checkbox" id="passphraseCapitalize">
              <span>Capitalize</span>
            </label>
            <select id="capitalizePosition" class="extra-select" disabled>
              <option value="all" selected>All words</option>
              <option value="first">First word</option>
              <option value="last">Last word</option>
            </select>
          </div>
          <div class="extra-option">
            <label class="checkbox-label">
              <input type="checkbox" id="passphraseNumbers">
              <span>Add number</span>
            </label>
            <div class="extra-selects">
              <select id="numberPosition" class="extra-select" disabled>
                <option value="random" selected>Random</option>
                <option value="start">Start of</option>
                <option value="end">End of</option>
              </select>
              <select id="numberWord" class="extra-select" disabled>
                <option value="random" selected>Random word</option>
                <option value="first">First word</option>
                <option value="last">Last word</option>
                <option value="all">All words</option>
              </select>
            </div>
          </div>
          <div class="extra-option">
            <label class="checkbox-label">
              <input type="checkbox" id="passphraseSymbols">
              <span>Add symbol</span>
            </label>
            <div class="extra-selects">
              <select id="symbolPosition" class="extra-select" disabled>
                <option value="random" selected>Random</option>
                <option value="start">Start of</option>
                <option value="end">End of</option>
              </select>
              <select id="symbolWord" class="extra-select" disabled>
                <option value="random" selected>Random word</option>
                <option value="first">First word</option>
                <option value="last">Last word</option>
                <option value="all">All words</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <p class="hint">Words from the EFF Diceware list (~7,776 words, ~12.9 bits entropy per word)</p>
    </div>

    <div class="actions">
      <button class="btn btn-primary" id="generateBtn">Generate</button>
      <button class="btn btn-secondary" id="copyBtn">Copy</button>
    </div>

    <div class="output-card">
      <div class="output-value" id="output" contenteditable="true" spellcheck="false"></div>
      <div class="strength-container">
        <div class="feedback" id="feedback"></div>
        <div class="strength-bar">
          <div class="strength-bar-fill" id="strengthBar"></div>
        </div>
        <p class="strength-info">
          Entropy calculated using <a href="https://en.wikipedia.org/wiki/Entropy_(information_theory)" target="_blank" rel="noopener">Shannon information theory</a>.
          Passwords: length × log₂(charset size). Passphrases: ~12.9 bits per word (<a href="https://www.eff.org/dice" target="_blank" rel="noopener">EFF Diceware</a>).
        </p>
      </div>
    </div>

    <div class="api-section">
      <div class="api-header">
        <label>API URL</label>
        <button class="btn-icon" id="copyUrlBtn" title="Copy URL">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
        </button>
      </div>
      <div class="api-url" id="apiUrl"></div>
      <p class="hint">Use this URL to generate passwords with the same settings. Add <code>&amp;bare=1</code> for minimal output.</p>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
